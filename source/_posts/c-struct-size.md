---
title: C语言中的结构体对齐
tags: 
- 编程
- c
---

## 例子

```c
struct hello {
    uint8_t a;
    uint32_t b;
    uint16_t c;
}
```

`hello`结构体的大小为 **12**, 因为c语言中结构体的大小遵循四大原则.

## 原则

1. 成员在其大小倍数的位置访问速度最快. `uint16_t`类型的放到2的倍数地址位置访问最快: `0,2,4,6`
2. 允许指定PACK大小来规避原则1.
3. (未理解) 结构体的大小为最大成员的整数倍
4. (未理解) 当A结构内含有结构B时，B在A中的偏移地址为B结构内最大元素类型的大小的整数倍

如上面的例子, `a`显然放在地址`0`处; `b` 最好放在`4,8,12`处速度最快, 因此放置于`4`; `c` 最好放置在`2,4,6,8,10`, 因此放置于`8`. 

同时由于原则3, 整体大小为12.

